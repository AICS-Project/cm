<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>チラシGPTプロンプトメーカー</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      background: #f8f7f2;
      max-width: 100%;
      margin: 0 auto;
      padding: 1.5em;
      box-sizing: border-box;
    }
    h1 {
      color: #6b4f1d;
      font-size: 1.5em;
      margin-bottom: 1em;
    }
    label {
      font-weight: bold;
      margin-top: 1em;
      display: block;
    }
    input[type="text"], input[type="date"], textarea {
      width: 100%;
      font-size: 1em;
      margin-top: .3em;
      padding: .5em;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    textarea {
      height: 80px;
    }
    button {
      background: #bfa87a;
      color: #fff;
      border: none;
      padding: .7em 2em;
      font-size: 1em;
      border-radius: 6px;
      margin-top: 1em;
      margin-right: 1em;
      cursor: pointer;
    }
    .event-set {
      border: 1px solid #ccc;
      padding: 1em;
      border-radius: 8px;
      margin-bottom: 1em;
      background: #fff;
    }
    #output {
      background: #fff;
      border: 1px solid #ccc;
      padding: 1em;
      border-radius: 6px;
      margin-top: 2em;
      white-space: pre-wrap;
    }
    @media (max-width: 600px) {
      body {
        padding: 1em;
      }
      button {
        width: 100%;
        margin-top: 1em;
      }
    }
  </style>
</head>
<body>
  <h1>📝 チラシGPTプロンプトメーカー</h1>

  <label for="event">イベント名</label>
  <input type="text" id="event" placeholder="例：家族による家族学習会">

  <label>開催情報（複数回可）</label>
  <div id="schedule-container">
    <div class="event-set">
      <input type="date" class="date">
      <input type="text" class="region" placeholder="地域名（例：福岡市南区）">
      <input type="text" class="venue" placeholder="会場名（例：いのちの春希望館）">
    </div>
  </div>
  <button onclick="addSchedule()">＋開催回を追加</button>

  <label>対象者（固定文：精神障がいのあるご家族を支える方）</label>
  <textarea id="audience" placeholder="変更したい場合のみ入力（空欄で固定文）"></textarea>

  <label>内容・目的（固定文：病気理解・体験共有・制度活用・交流など）</label>
  <textarea id="purpose" placeholder="変更したい場合のみ入力（空欄で固定文）"></textarea>

  <label for="organizer">主催者名（例：みんなねっと）</label>
  <input type="text" id="organizer" placeholder="例：全国精神保健福祉会連合会（みんなねっと）">

  <label for="fee">料金（例：1,500円／テキスト・茶菓子代含む）</label>
  <input type="text" id="fee" placeholder="例：1,500円（テキスト・茶菓子代含む）">

  <label for="contact">問い合わせ先（任意：電話・メールなど）</label>
  <input type="text" id="contact" placeholder="例：090-xxxx-xxxx / email@example.com">

  <button onclick="generatePrompt()">プロンプト生成</button>

  <div id="output" style="display:none;"></div>
  <button id="copyBtn" style="display:none;" onclick="copyToClipboard()">コピー</button>

  <script>
    function addSchedule() {
      const container = document.getElementById('schedule-container');
      const block = document.createElement('div');
      block.className = 'event-set';
      block.innerHTML = `
        <input type="date" class="date">
        <input type="text" class="region" placeholder="地域名（例：福岡市南区）">
        <input type="text" class="venue" placeholder="会場名（例：いのちの春希望館）">
      `;
      container.appendChild(block);
    }

    function generatePrompt() {
      const eventName = document.getElementById('event').value;
      const organizer = document.getElementById('organizer').value;
      const fee = document.getElementById('fee').value;
      const contact = document.getElementById('contact').value;

      const audience = document.getElementById('audience').value.trim() ||
        '精神障がいのあるご家族を支える方を対象としています。';
      const purpose = document.getElementById('purpose').value.trim() ||
        '病気理解・体験共有・制度活用・交流を通じて、安心できる居場所づくりを目指します。';

      const dates = document.querySelectorAll('.date');
      const regions = document.querySelectorAll('.region');
      const venues = document.querySelectorAll('.venue');

      let scheduleText = "";
      for (let i = 0; i < dates.length; i++) {
        if (dates[i].value && regions[i].value && venues[i].value) {
          const d = new Date(dates[i].value);
          const formatted = `${d.getFullYear()}年${d.getMonth()+1}月${d.getDate()}日`;
          scheduleText += `・${formatted}／${regions[i].value}／${venues[i].value}\n`;
        }
      }

      const prompt = `あなたはやさしく信頼感のある広報担当者です。
以下の情報をもとに、地域向けの参加者募集チラシ文を作成してください。

- ターゲットは、精神障がいのある方を支えるご家族です。
- 全体のトーンはやさしく、安心感があり、読みやすい文章にしてください。
- キャッチコピーも最初に1つ考えてください。
\n以下の情報をもとに、地域向けのチラシ文を作ってください。\n
【イベント名】${eventName}
【開催日程】
${scheduleText}
【対象者】
${audience}
【内容】
${purpose}
【主催】
${organizer}
${contact ? `【問い合わせ先】\n${contact}` : ""}`;

      const output = document.getElementById('output');
      output.style.display = "block";
      output.textContent = prompt;

      document.getElementById('copyBtn').style.display = "inline-block";
    }

    function copyToClipboard() {
      const text = document.getElementById('output').textContent;
      navigator.clipboard.writeText(text).then(() => {
        alert("コピーしました！");
      });
    }
  </script>
</body>
</html>
